<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Questle | Quests</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
    body {
      background-color: #1f5122;
      color: #f1f1f1;
      font-family: 'Press Start 2P', cursive;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #3e8e41;
      padding: 20px;
      text-align: center;
      color: white;
      border-bottom: 5px solid #2f6e32;
    }
    nav {
      text-align: center;
      padding: 10px;
    }
    nav a {
      color: #f0f0f0;
      text-decoration: none;
      margin: 0 15px;
    }
    main {
      max-width: 800px;
      margin: 30px auto;
      padding: 20px;
      background-color: #2f6e32;
      border-radius: 10px;
    }
    select {
      display: block;
      margin: 10px auto;
      padding: 8px;
      font-size: 12px;
      font-family: 'Press Start 2P', cursive;
    }
    .points {
      color: #d9ffcc;
      margin-left: 10px;
    }
    .quest {
      margin: 10px 0;
    }
    .total {
      text-align: center;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Questle | Quests</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="quests.html">Quests</a>
      <a href="store.html">Store</a>
      <a href="dashboard.html">Dashboard</a>
    </nav>
  </header>
  <main>
    <div class="total">Points Earned: <span id="availablePoints">0</span></div>
    <select id="gameSelect" onchange="populateDifficulties()">
      <option value="">Select a Game</option>
      <option value='Minecraft'>Minecraft</option><option value='League of Legends'>League of Legends</option><option value='Monster Hunter Wilds'>Monster Hunter Wilds</option><option value='Farming Simulator'>Farming Simulator</option><option value='Diablo 4'>Diablo 4</option><option value='Baldur’s Gate 3'>Baldur’s Gate 3</option><option value='Palworld'>Palworld</option>
    </select>
    <select id="diffSelect" onchange="showQuests()"></select>
    <div id="quests"></div>
  </main>
  <script id="questData" type="application/json">{"Minecraft": {"[Very Difficult]": [{"Quest": "[Very Difficult] Defeat the Ender Dragon in Hardcore mode", "Points": 50}], "[Hard]": [{"Quest": "[Hard] Complete a Woodland Mansion without dying", "Points": 25}, {"Quest": "[Hard] Raid a Bastion Remnant and loot the chests", "Points": 25}], "[Moderate]": [{"Quest": "[Moderate] Craft a full set of diamond armor", "Points": 10}, {"Quest": "[Moderate] Trade with a villager until they become a master", "Points": 10}]}, "League of Legends": {"[Very Difficult]": [{"Quest": "[Very Difficult] Win a ranked game with an S+ grade", "Points": 50}], "[Hard]": [{"Quest": "[Hard] Get 20 assists in a match as a support", "Points": 25}, {"Quest": "[Hard] Win a game without dying once", "Points": 25}], "[Moderate]": [{"Quest": "[Moderate] Ward over 20 times in a game", "Points": 10}, {"Quest": "[Moderate] Score First Blood", "Points": 10}]}, "Monster Hunter Wilds": {"[Very Difficult]": [{"Quest": "[Very Difficult] Defeat a tempered elder dragon solo", "Points": 50}], "[Hard]": [{"Quest": "[Hard] Hunt a monster without taking any healing items", "Points": 25}, {"Quest": "[Hard] Break every part of a monster in one hunt", "Points": 25}], "[Moderate]": [{"Quest": "[Moderate] Capture a large monster", "Points": 10}, {"Quest": "[Moderate] Craft a full armor set from one monster", "Points": 10}]}, "Farming Simulator": {"[Very Difficult]": [{"Quest": "[Very Difficult] Run a farm for 10 in-game years with profit", "Points": 50}], "[Hard]": [{"Quest": "[Hard] Buy and automate a full greenhouse setup", "Points": 25}, {"Quest": "[Hard] Harvest and deliver three crop types in one session", "Points": 25}], "[Moderate]": [{"Quest": "[Moderate] Sell a full trailer of harvested crops", "Points": 10}, {"Quest": "[Moderate] Use three different machines on the same field", "Points": 10}]}, "Diablo 4": {"[Very Difficult]": [{"Quest": "[Very Difficult] Complete a Tier 100 Nightmare Dungeon solo", "Points": 50}], "[Hard]": [{"Quest": "[Hard] Defeat a World Boss on World Tier 4", "Points": 25}, {"Quest": "[Hard] Obtain and max enchant a Legendary item", "Points": 25}], "[Moderate]": [{"Quest": "[Moderate] Clear five Helltide chests", "Points": 10}, {"Quest": "[Moderate] Imprint a Legendary Aspect onto your gear", "Points": 10}]}, "Baldur\u2019s Gate 3": {"[Very Difficult]": [{"Quest": "[Very Difficult] Complete the game without using Long Rest", "Points": 50}], "[Hard]": [{"Quest": "[Hard] Solve a major puzzle without guides", "Points": 25}, {"Quest": "[Hard] Pass a DC 30 Persuasion or Intimidation check", "Points": 25}], "[Moderate]": [{"Quest": "[Moderate] Recruit all companions in a single playthrough", "Points": 10}, {"Quest": "[Moderate] Successfully steal from a major NPC", "Points": 10}]}, "Palworld": {"[Very Difficult]": [{"Quest": "[Very Difficult] Capture a legendary Pal without taking damage", "Points": 50}], "[Hard]": [{"Quest": "[Hard] Defeat a Tower Boss solo", "Points": 25}, {"Quest": "[Hard] Breed a Pal with the best combat traits", "Points": 25}], "[Moderate]": [{"Quest": "[Moderate] Capture 10 unique Pals", "Points": 10}, {"Quest": "[Moderate] Build and power a fully automated base", "Points": 10}]}}</script>
  <script>
    const quests = JSON.parse(localStorage.getItem("questle-completedQuests") || "[]");
    const questData = JSON.parse(document.getElementById('questData').textContent);
    let selectedGame = null;

    function populateDifficulties() {
      selectedGame = document.getElementById("gameSelect").value;
      const difficulties = Object.keys(questData[selectedGame] || {});
      const diffSelect = document.getElementById("diffSelect");
      diffSelect.innerHTML = '<option value="">Select Difficulty</option>';
      difficulties.forEach(d => {
        const opt = document.createElement("option");
        opt.value = d;
        opt.textContent = d;
        diffSelect.appendChild(opt);
      });
      document.getElementById("quests").innerHTML = "";
    }

    function showQuests() {
      const diff = document.getElementById("diffSelect").value;
      const container = document.getElementById("quests");
      container.innerHTML = "";
      if (questData[selectedGame] && questData[selectedGame][diff]) {
        questData[selectedGame][diff].forEach((q, i) => {
          const id = `${selectedGame}_${diff}_${i}`;
          const checked = quests.includes(id);
          const item = document.createElement("div");
          item.className = "quest";
          item.style.textDecoration = checked ? "line-through" : "none";
          item.style.color = checked ? "#888" : "#f1f1f1";
          item.innerHTML = `
            <label>
              <input type="checkbox" ${checked ? "checked" : ""} onchange="toggleQuest('${id}', ${q.Points}, this)">
              ${q.Quest} <span class='points'>(${q.Points} pts)</span>
            </label>
          `;
          container.appendChild(item);
        });
      }
    }

    function toggleQuest(id, points, input) {
      let completed = JSON.parse(localStorage.getItem("questle-completedQuests") || "[]");
      let totalPoints = Number(localStorage.getItem("questle-totalPoints") || 0);
      if (input.checked && !completed.includes(id)) {
        completed.push(id);
        totalPoints += points;
      } else if (!input.checked && completed.includes(id)) {
        completed = completed.filter(q => q !== id);
        totalPoints -= points;
      }
      localStorage.setItem("questle-completedQuests", JSON.stringify(completed));
      localStorage.setItem("questle-totalPoints", totalPoints);
      document.getElementById("availablePoints").textContent = totalPoints;
      showQuests();
    }

    window.onload = () => {
      document.getElementById("availablePoints").textContent = localStorage.getItem("questle-totalPoints") || 0;
    };
  </script>
</body>
</html>
